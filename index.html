<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Discipline App</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #111;
  color: white;
  text-align: center;
}

h1 {
  margin-top: 20px;
}

.card {
  background: #1c1c1c;
  margin: 15px;
  padding: 20px;
  border-radius: 12px;
}

button {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  background: #00ff9d;
  color: black;
  font-size: 16px;
}
</style>
</head>

<body>

<h1>Сегодня</h1>

<div class="card">
  <p>Чтение 20 минут</p>
  <button onclick="completeTask()">Сделано</button>
</div>

<script>
let tg = window.Telegram.WebApp;
tg.expand();

let today = new Date().toDateString();

let savedDay = localStorage.getItem("day");
let xp = Number(localStorage.getItem("xp")) || 0;
let done = localStorage.getItem("done") === "true";

if(savedDay !== today){
  done = false;
  localStorage.setItem("done", "false");
  localStorage.setItem("day", today);
}

updateUI();

function completeTask(){
  if(done) return;

  done = true;
  xp += 10;

  localStorage.setItem("xp", xp);
  localStorage.setItem("done", "true");

  updateUI();
}

function updateUI(){
 document.querySelector("button").innerText = done ? "Сделано ✔" : "Сделать";
  document.querySelector("button").disabled = done;

  let xpText = document.getElementById("xp");
  if(!xpText){
    xpText = document.createElement("p");
    xpText.id = "xp";
    document.body.appendChild(xpText);
  }

  xpText.innerText = "XP: " + xp;
}
</script>


</body>
</html>




